import{k as x,p as F,r as i,l as R,g as o,m as _,d as D,D as P,a7 as b,V as N,e as B,o as I,w as s,aw as U,f as d,R as V,h as y,S as M,O as T,aM as h}from"./index-Df40-tzr.js";import{V as j,c as g}from"./VTextField-D4Yq6fRY.js";import{o as q,f as z,p as A,V as L,c as C,e as k}from"./route-block-CDHfvDbu.js";import{V as O,b as E,d as G,c as H}from"./VCard-CkzHUz-b.js";import{V as J}from"./scopeId-BHbkof3w.js";import"./VGrid-BYzztG6h.js";import"./delay-DPvD8lzn.js";const K=F({..._(),...A()},"VForm"),Q=x()({name:"VForm",props:K(),emits:{"update:modelValue":m=>!0,submit:m=>!0},setup(m,f){let{slots:n,emit:r}=f;const l=q(m),u=i();function c(a){a.preventDefault(),l.reset()}function p(a){const e=a,t=l.validate();e.then=t.then.bind(t),e.catch=t.catch.bind(t),e.finally=t.finally.bind(t),r("submit",e),e.defaultPrevented||t.then(w=>{var v;let{valid:S}=w;S&&((v=u.value)==null||v.submit())}),e.preventDefault()}return R(()=>{var a;return o("form",{ref:u,class:["v-form",m.class],style:m.style,novalidate:!0,onReset:c,onSubmit:p},[(a=n.default)==null?void 0:a.call(n,l)])}),z(l,u)}}),W=D({__name:"settings",setup(m){const f=i(!1),n=i(""),r=i(""),l=i(!1),u=i(""),c=i("");P(async()=>{const a=await b();if(!a)return;const e=await N(a.uid);e&&(n.value=e.username,r.value=e.friendId||"")});const p=async()=>{try{const a=await b();if(!a)return;f.value=!0,await h({id:a.uid,username:n.value,friendId:r.value}),c.value="Dados atualizados com sucesso",u.value="success",l.value=!0}catch(a){console.error(a),c.value="NÀo foi possível salvar seus dados. Por favor tente mais tarde.",u.value="error",l.value=!0}finally{f.value=!1}};return(a,e)=>(I(),B(H,null,{default:s(()=>[e[4]||(e[4]=U("h1",{class:"mb-2"},"Sua Conta",-1)),o(j,{modelValue:d(l),"onUpdate:modelValue":e[0]||(e[0]=t=>V(l)?l.value=t:null),color:d(u),"close-delay":"5000",location:"top center"},{default:s(()=>[y(M(d(c)),1)]),_:1},8,["modelValue","color"]),o(Q,{onSubmit:T(p,["prevent"]),disabled:d(f)},{default:s(()=>[o(O,null,{default:s(()=>[o(E,null,{default:s(()=>[o(L,null,{default:s(()=>[o(C,{col:"12",md:"6",lg:"4",xl:"3"},{default:s(()=>[o(g,{label:"Nome no jogo",modelValue:d(n),"onUpdate:modelValue":e[1]||(e[1]=t=>V(n)?n.value=t:null),required:""},null,8,["modelValue"])]),_:1}),o(C,{col:"12",md:"6",lg:"4",xl:"3"},{default:s(()=>[o(g,{label:"Id de amigo",modelValue:d(r),"onUpdate:modelValue":e[2]||(e[2]=t=>V(r)?r.value=t:null)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(G,{class:"justify-end"},{default:s(()=>[o(J,{type:"submit",loading:d(f)},{default:s(()=>e[3]||(e[3]=[y("Salvar")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1}))}});typeof k=="function"&&k(W);export{W as default};
